<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Real-Time Notepad</title>
    <!-- Include Firebase libraries from the official CDN -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      /* Tab styling */
      .tab-container {
        display: flex;
        margin-bottom: 10px;
        gap: 5px;
      }
      .tab {
        padding: 10px 15px;
        cursor: pointer;
        background-color: #f0f0f0;
        border: 1px solid #ccc;
        border-radius: 5px 5px 0 0;
      }
      .tab.active {
        background-color: white;
        border-bottom: 1px solid white;
      }
      .tab:hover {
        background-color: #e0e0e0;
      }
      textarea {
        width: 100%;
        height: 300px;
        font-size: 16px;
        padding: 10px;
        border: 1px solid #ccc;
      }
      /* ... (keep existing modal styles the same) ... */
    </style>
  </head>
  <body>
    <!-- Modal for password entry (keep this the same) -->
    
    <!-- Main content -->
    <div id="mainContent">
      <h1>Team Notepad</h1>
      <div class="tab-container">
        <div class="tab active" data-user="Nitin">Nitin</div>
        <div class="tab" data-user="Meghna">Meghna</div>
        <div class="tab" data-user="Robin">Robin</div>
        <div class="tab" data-user="Imti">Imti</div>
        <div class="tab" data-user="Karan">Karan</div>
        <div class="tab" data-user="Rashmi">Rashmi</div>
      </div>
      <p>Type anything below. Changes will instantly sync across all browsers!</p>
      <textarea id="notepad" placeholder="Start typing..."></textarea>

      <script>
        // Password Protection Script (keep this the same)

        // Firebase configuration (keep your existing config)

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        let currentNoteRef = null;

        // Tab functionality
        document.querySelectorAll('.tab').forEach(tab => {
          tab.addEventListener('click', function() {
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            // Add active class to clicked tab
            this.classList.add('active');
            // Update the notepad content
            updateNotepadReference(this.dataset.user);
          });
        });

        function updateNotepadReference(user) {
          // Reference to the user's document
          currentNoteRef = db.collection("notes").doc(user);
          
          // Clear existing listener if any
          if (currentNoteRef.onSnapshot) currentNoteRef.onSnapshot(() => {});
          
          // Listen for live changes
          currentNoteRef.onSnapshot(function(doc) {
            if (doc.exists) {
              const data = doc.data();
              const textArea = document.getElementById("notepad");
              if (data && data.content !== textArea.value) {
                textArea.value = data.content;
              }
            }
          });
        }

        // Initialize with first tab
        updateNotepadReference('Nitin');

        // Update Firestore when text changes
        document.getElementById("notepad").addEventListener("input", function() {
          if (currentNoteRef) {
            currentNoteRef.set({
              content: this.value
            });
          }
        });
      </script>
    </div>
  </body>
</html>
